
<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- title -->
    <title>Waddenlust</title>

    <!-- css -->
    <link href='https://fonts.googleapis.com/css?family=Raleway:400,100,200,300,500,900,800,700,600' rel='stylesheet' type='text/css'>
    <link href="style.css" rel="stylesheet">

  </head>
  <body>

  <!-- loading screen -->
  <div id="pulldown">
    <div id="pulldowncontent"><h1>WADDENLUST</h1>
    <svg version="1.1" id="waddenlust" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 960 114" style="enable-background:new 0 0 960 114;" xml:space="preserve">
      <style type="text/css">
        .stw0{fill:#FFFFFF;}
      </style>
      <g>
        <path class="stw0" d="M51.5,32.6H54l7.7,18.3l7.8-18.3H72l-8.8,20.5L74.4,79l20-46.8H97L75.5,81.8h-2.4L61.8,55.4L50.3,81.8H48
          L26.5,32.1h2.6L49.2,79l11.1-25.9L51.5,32.6z"/>
        <path class="stw0" d="M163.3,32.1h2.1l21.4,49.7h-2.6l-7.4-17.1h-24.9l-7.4,17.1h-2.7L163.3,32.1z M176.1,62.6l-11.7-27.4
          l-11.8,27.4H176.1z"/>
        <path class="stw0" d="M241.7,81.8V32.1h16.2c3.9,0,7.4,0.7,10.3,2c2.9,1.3,5.4,3.1,7.3,5.3c1.9,2.2,3.4,4.9,4.4,7.9
          c1,3,1.5,6.2,1.5,9.6c0,3.8-0.5,7.2-1.6,10.3c-1.1,3.1-2.7,5.7-4.7,7.8c-2,2.2-4.5,3.9-7.4,5c-2.9,1.2-6.1,1.8-9.7,1.8H241.7z
           M278.9,56.9c0-3.3-0.5-6.3-1.4-9c-0.9-2.8-2.3-5.1-4.1-7.1c-1.8-2-4-3.6-6.6-4.7c-2.6-1.1-5.6-1.7-9-1.7h-13.8v45.2h13.8
          c3.5,0,6.5-0.6,9.1-1.7c2.6-1.1,4.8-2.7,6.6-4.8c1.8-2,3.1-4.4,4-7.2C278.4,63.1,278.9,60.1,278.9,56.9z"/>
        <path class="stw0" d="M338.4,81.8V32.1h16.2c3.9,0,7.4,0.7,10.3,2c2.9,1.3,5.4,3.1,7.3,5.3c1.9,2.2,3.4,4.9,4.4,7.9
          c1,3,1.5,6.2,1.5,9.6c0,3.8-0.5,7.2-1.6,10.3c-1.1,3.1-2.7,5.7-4.7,7.8c-2,2.2-4.5,3.9-7.4,5c-2.9,1.2-6.1,1.8-9.7,1.8H338.4z
           M375.6,56.9c0-3.3-0.5-6.3-1.4-9c-0.9-2.8-2.3-5.1-4.1-7.1c-1.8-2-4-3.6-6.6-4.7c-2.6-1.1-5.6-1.7-9-1.7h-13.8v45.2h13.8
          c3.5,0,6.5-0.6,9.1-1.7c2.6-1.1,4.8-2.7,6.6-4.8c1.8-2,3.1-4.4,4-7.2C375.2,63.1,375.6,60.1,375.6,56.9z"/>
        <path class="stw0" d="M468,79.6v2.2h-32.8V32.1h32.2v2.2h-29.8v20.9h26v2.2h-26v22H468z"/>
        <path class="stw0" d="M527.5,36.8v45.1h-2.5V32.1h1.8L563.4,78V32.1h2.4v49.7h-2.4L527.5,36.8z"/>
        <path class="stw0" d="M626.2,81.8V32.1h2.5v47.5h30.5v2.2H626.2z"/>
        <path class="stw0" d="M730.4,79.9c3.5,0,6.5-0.7,8.9-2s4.2-3.1,5.6-5.2c1.4-2.1,2.3-4.6,2.9-7.3c0.6-2.7,0.8-5.5,0.8-8.3V32.1h2.4
          v24.9c0,3.3-0.3,6.5-1,9.5c-0.7,3-1.9,5.7-3.5,8c-1.6,2.3-3.7,4.2-6.3,5.5c-2.6,1.4-5.8,2.1-9.6,2.1c-3.9,0-7.2-0.7-9.8-2.2
          s-4.7-3.3-6.3-5.7c-1.6-2.4-2.7-5-3.4-8.1c-0.7-3-1-6.1-1-9.2V32.1h2.4v24.9c0,2.9,0.3,5.7,0.8,8.4c0.6,2.7,1.5,5.2,2.9,7.3
          c1.4,2.1,3.3,3.8,5.6,5.1C724,79.2,726.9,79.9,730.4,79.9z"/>
        <path class="stw0" d="M839.3,39.5c-1.8-2-3.8-3.4-6-4.2c-2.2-0.8-4.8-1.2-7.7-1.2c-5.3,0-9.1,1-11.5,3c-2.4,2-3.6,4.7-3.6,8
          c0,1.7,0.3,3.1,0.9,4.2c0.6,1.1,1.5,2.1,2.7,2.9c1.2,0.8,2.8,1.5,4.7,2c1.9,0.5,4.2,1.1,6.9,1.6c2.7,0.6,5.2,1.2,7.3,1.8
          s4.1,1.5,5.6,2.5c1.5,1,2.7,2.3,3.6,3.7c0.8,1.5,1.3,3.3,1.3,5.5c0,2.1-0.4,3.9-1.2,5.5c-0.8,1.6-2,2.9-3.5,4
          c-1.5,1.1-3.4,1.9-5.6,2.4c-2.2,0.5-4.6,0.8-7.2,0.8c-4,0-7.5-0.6-10.7-1.9c-3.2-1.2-6.1-3.1-8.8-5.7l1.5-1.8c2.3,2.4,5,4.2,8,5.4
          c3,1.2,6.4,1.8,10.2,1.8c4.7,0,8.3-0.9,11-2.6c2.7-1.7,4-4.3,4-7.8c0-1.8-0.3-3.3-1-4.5c-0.7-1.2-1.6-2.3-3-3.1s-3-1.6-5-2.2
          s-4.4-1.2-7.2-1.8c-2.7-0.6-5.1-1.1-7.2-1.8c-2.1-0.6-3.8-1.4-5.3-2.3c-1.4-0.9-2.5-2.1-3.2-3.4c-0.7-1.4-1.1-3.1-1.1-5.1
          c0-2.2,0.4-4.1,1.3-5.8c0.8-1.7,2-3.1,3.5-4.3c1.5-1.1,3.3-2,5.5-2.6c2.1-0.6,4.5-0.9,7.1-0.9c3.2,0,6,0.5,8.5,1.4
          c2.4,0.9,4.6,2.4,6.7,4.5L839.3,39.5z"/>
        <path class="stw0" d="M933.5,34.4h-18.6v47.5h-2.5V34.4h-18.6v-2.2h39.7V34.4z"/>
      </g>
    </svg>
    <div class="loader">Loading...</div></div>
  </div>

  <!-- story -->
  <div class="storywindow">
    <div id="storyp1" class="storybody">
      <div class="column8">
        <h2>WADDENLUST</h2>
        <h2>WANDERLUST</h2>
        <p style="text-align: center;">DE ZOEKTOCHT VAN EEN JONGE FILMMAKER NAAR DE GEHEIMEN VAN HET WAD EN HAARZELF</p>
        <p class="inline-left text">Samantha Visser is een jonge, ambitieuze filmmaker. Na een hectisch jaar besloot ze op zoek te gaan naar bijzondere, onontdekte plekken. Dat onontgonnen gebied vond ze: de wadden. De daaropvolgende weken reisde ze lang de waddenkust, van Denemarken tot Texel. Ze legde alles vast in de achtdelige serie "Waddenlust".</p><img class="inline-right" src="img/samantha.jpg" alt="Samantha Visser">
        <h2 class="breakquote">KAMPVUUR SESSIES</h2>
        <img class="inline-left" src="img/kampvuursessie.jpg" alt="Samantha Visser"><p class="inline-right text">Samen met haar goede vriend Arjen eindigde ze haar reis met een reeks kampvuur sessies. Arjen is een opkomend muzikaal talent en samen besloten ze de rust en schoonheid van het wad naar de stad de brengen. Op verschillende drukke locaties haalden ze mensen uit hun hektische leven naar de rust van het wad.</p>
        <p id="storyp1close" class="storybutton">BEKIJK DE ROUTE &#8595;</p>
      </div>
    </div>
  </div>

  <!-- map -->
  <div id="map">
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 1080 1080" style="enable-background:new 0 0 1080 1080;" xml:space="preserve">
    <style type="text/css">
      .st0{fill:none;stroke:#F44336;stroke-width:2;stroke-miterlimit:10;opacity:0.5;}
      .labelguide{fill:none;}
      .st2{fill:#fff;}
      .st3{font-family:'Raleway'; font-weight: 200;}
      .st4{font-size:15.5px;}
    </style>
      <circle id="waypoint1" class="st0" cx="796.2" cy="214.7" r="9.7"/>
      <line class="st0" x1="795.8" y1="224.4" x2="786.4" y2="450.8"/>
      <circle id="waypoint2" class="st0" cx="786.4" cy="460.6" r="9.7"/>
      <line class="st0" x1="782.7" y1="469.6" x2="696.6" y2="687.7"/>
      <circle id="waypoint3" class="st0" cx="693" cy="696.8" r="9.7"/>
      <line class="st0" x1="684" y1="700.5" x2="515.2" y2="770.4"/>
      <circle id="waypoint4" class="st0" cx="506.2" cy="774.1" r="9.7"/>
      <circle id="waypoint5" class="st0" cx="323.5" cy="829.1" r="9.7"/>
      <line class="st0" x1="496.9" y1="776.9" x2="333.3" y2="826.2"/>
      <line class="st0" x1="313.8" y1="829.1" x2="129.6" y2="838.8"/>
      <circle id="waypoint6" class="st0" cx="119.9" cy="838.8" r="9.7"/>
      <circle id="waypoint7" class="st0" cx="165.5" cy="903.5" r="9.7"/>
      <line class="st0" x1="159.9" y1="895.5" x2="125.5" y2="846.8"/>
      <line class="st0" x1="157.5" y1="909" x2="62.6" y2="974.3"/>
      <circle id="waypoint8" class="st0" cx="54.5" cy="979.8" r="9.7"/>
    </svg>
    <!-- labels -->
    <div id="label1" class="label">R&oslash;m&oslash;</div>
    <div id="label2" class="label">Wattenmeer</div>
    <div id="label3" class="label">Minsener Oog</div>
    <div id="label4" class="label">Leybucht</div>
    <div id="label5" class="label">Lauwersmeer</div>
    <div id="label6" class="label">Groene Strand</div>
    <div id="label7" class="label">Harlingen</div>
    <div id="label8" class="label">Amsteldiep</div>
  </div>

  <!-- menu button -->
  <div id="hamburger"><img id="hamburgericon" alt="menu" src="img/hamburger.svg"></div>

  <!-- info panels -->
  <div id="info1" class="infopanel left">
    <h2>R&oslash;m&oslash;<span class="arrow">&#10093;</span></h2>
    <div><p>Het startpunt van onze tocht is het Deense eiland R&oslash;m&oslash;. R&oslash;m&oslash; heeft een enorm breed strand. Behalve zwemmen en van de zon genieten is er volop ruimte voor kitebuggies, strandzeilers en autos. Het eiland beweert het breedste strand van Europa te hebben, maar Schiermonnikoog claimt dat zij het breedste strand van Europa hebben. Wie heeft het breedste strand?</p></div>
    <div class="vidbanner"><span class="vidthumb" style="background-image: url('img/thumbs/darken.png'), url('img/thumbs/ep1.jpg');">&#9658;</span><span class="viddescr"><h3>Aflevering 1: R&oslash;m&oslash;</h3><p>Wie heeft het breedste strand?</p></span></div>
  </div>
  <div id="info2" class="infopanel left">
    <h2>Wattenmeer<span class="arrow">&#10093;</span></h2>
    <div><p>De Duitse Waddenzee is een vaak vergeten stukje wad. Een van de twee belangrijkste gebieden is het Schleswig-Holsteinisches Wattenmeer ligt in het Noorden van de Duitse Waddenzee. Wat valt er te zien en te beleven tussen Duitsland en de Noordzee?</p></div>
    <div class="vidbanner"><span class="vidthumb" style="background-image: url('img/thumbs/darken.png'), url('img/thumbs/ep2.jpg');">&#9658;</span><span class="viddescr"><h3>Aflevering 2: Wattenmeer</h3><p>Kun je kuilen graven in Duitsland?</p></span></div>
  </div>
  <div id="info3" class="infopanel left">
    <h2>Minsener Oog<span class="arrow">&#10093;</span></h2>
    <div><p>Minsener-Oldoog is een Duits eiland in de Waddenzee dat bestaat uit twee zandplaten. Het door voornamelijk zandophopingen gevormde eiland is onbewoond. Er zijn maar weinig plekken waar je zo afgelegen bent. Wij liepen over de zee naar dit afgelegen eiland.</p></div>
    <div class="vidbanner"><span class="vidthumb" style="background-image: url('img/thumbs/darken.png'), url('img/thumbs/ep3.jpg');">&#9658;</span><span class="viddescr"><h3>Aflevering 3: Minsener Oog</h3><p>Lopen over de zee.</p></span></div>
  </div>
  <div id="info4" class="infopanel left">
    <h2>Leybucht<span class="arrow">&#10093;</span></h2>
    <div><p>Een rijk gebied met veel leven. Bijzonder aan deze baai aan de Duitse kust zijn de zoute moerassen. Maar wat valt er te beleven in dit natuurgebied als je geen vogelaar of zout-expert bent?</p></div>
    <div class="vidbanner"><span class="vidthumb" style="background-image: url('img/thumbs/darken.png'), url('img/thumbs/ep4.jpg');">&#9658;</span><span class="viddescr"><h3>Aflevering 4: Leybucht</h3><p>Is er meer dan vogels, modder en zout?</p></span></div>
  </div>
  <div id="info5" class="infopanel left">
    <h2>Lauwersmeer<span class="arrow">&#10093;</span></h2>
    <div><p>Op typisch Nederlandse wijze is het Lauwersmeer gebied door mensen gemaakt. Toch is het vooral de natuur die dit gebied zo bijzonder maakt. Maar dit gebied is meer dan alleen een plaats voor natuurliefhebbers. Wij maakten prachtige herrineringen in dit gebied aan het wad.</p></div>
    <div class="vidbanner"><span class="vidthumb" style="background-image: url('img/thumbs/darken.png'), url('img/thumbs/ep5.jpg');">&#9658;</span><span class="viddescr"><h3>Aflevering 5: Lauwersmeer</h3><p>Schietoefeningen, paarden en gitaren.</p></span></div>
  </div>
  <div id="info6" class="infopanel right">
    <h2>Groene Strand<span class="arrow">&#10093;</span></h2>
    <div><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p></div>
  </div>
  <div id="info7" class="infopanel right">
    <h2>Harlingen<span class="arrow">&#10093;</span></h2>
    <div><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p></div>
  </div>
  <div id="info8" class="infopanel right">
    <h2>Amsteldiep<span class="arrow">&#10093;</span></h2>
    <div><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p></div>
  </div>

  <!-- youtube frame -->
  <div id="yt-player"></div>

  <!-- JS -->
  <script src="js/jquery-2.2.1.min.js"></script>
  <script src="js/jquery.mousewheel.min.js"></script>
  <script src="js/jquery.touchSwipe.min.js"></script>
  <script src="js/parallax.jquery.min.js"></script>

  <script>

    $(document).ready(function(){

      // loading screen
      var loading_screen_pos = function() {
        var windowheight = $(window).height();
        $('#pulldown').css( "height", windowheight);
        var titlemargin = (windowheight - $('#pulldowncontent').height()) / 2;
        $('#pulldowncontent').css( "margin-top", titlemargin);
      }
      loading_screen_pos(); // currently not executed upon window-resize for performance reasons and limited utility

    // executing code after window load
    $(window).load(function(){

      var map_activate = false; // Map master switch (used for enabling/disabling controls)

      // STORY ===============================================================================

      $('#storyp1 h2:first-child').html('WANDERLUST');

      // story window start animation function (activated after loading)
      var storyp1 = function(action) {
        if (action == 'start') {
          $('#storyp1 h2:first-child').addClass("animated shake");
          setTimeout(function() {
            $('#storyp1 h2:first-child').html('WADDENLUST');
          }, 250);
        }
      }

      // story window closing animation
      $("#storyp1close").click(function() {
          $('.storywindow').removeClass("slideInDown");
          $('.storywindow').addClass("animated slideOutUp");
          setTimeout(function() {
            $('.storywindow').css( "z-index", 1);
          }, 2000);
          map_activate = true;
      });

      // story window re-intro animation (hamburger)
      $("#hamburger").click(function() {
          $('.storywindow').css( "z-index", 30);
          $('.storywindow').removeClass("slideOutUp");
          $('.storywindow').addClass("animated slideInDown");
          map_activate = false;
      });

      // =====================================================================================
      // MAP LOAD START
      // =====================================================================================

      // initial map resize
      var map_resize = function() {
        var map_windowwidth = $(window).width();
        var map_windowheight = $(window).height();
        if (map_windowheight>map_windowwidth) {
          // applying
          $('#map').css( "height", map_windowheight);
          $('#map').css( "width", map_windowheight);
        } else {
          // applying
          $('#map').css( "height", map_windowwidth);
          $('#map').css( "width", map_windowwidth);
        }
      }

      // map movement & object attach function
      var map_zoom = function(waypoint,zoom) {
        var windowwidth = $(window).width();
        var windowheight = $(window).height();
        var coords = [];
        coords[0] = $(waypoint).attr("cx"); // x coordinate
        coords[1] = $(waypoint).attr("cy"); // y coordinate
        var viewbox = 1080; // svg viewbox size
        var iconsize = 20; // width of map icon
        // calculating relative coords
        var rel = [];
        rel[0] = coords[0] / viewbox;
        rel[1] = coords[1] / viewbox;
        // calculating size after zoom
        var zoomsize = mapsize * zoom;
        // calculating absolute offset
        var absoffset = [];
        absoffset[0] = (zoomsize * rel[0]) * -1 + windowwidth / 2;
        absoffset[1] = (zoomsize * rel[1]) * -1 + windowheight / 2;
        // applying zoom
        $('#map').css( "width", zoomsize);
        $('#map').css( "height", zoomsize);
        // applying horizontal offset
        if (absoffset[0] > 0) {
          $('#map').css( "left", 0);
        } else if ((zoomsize + absoffset[0]) >= windowwidth) {
          $('#map').css( "left", absoffset[0]);
        } else {
          $('#map').css( "left", (zoomsize - windowwidth) * -1);
        }
        // applying vertical offset
        if (absoffset[1] > 0) {
          $('#map').css( "top", 0);
        } else if ((zoomsize + absoffset[1]) >= windowheight) {
          $('#map').css( "top", absoffset[1]);
        } else {
          $('#map').css( "top", (zoomsize - windowheight) * -1); 
        }
        // label attach function
        var map_attach = function(element,target,offsetx,offsety,corrx,corry) { // element to attach, target, canvas (relative) offset, .. , absolute correction, ..
          // getting coords
          var attach_rel_coords = [];
          attach_rel_coords[0] = (parseInt($(target).attr("cx")) + offsetx) / viewbox; // x-coordinates of target
          attach_rel_coords[1] = (parseInt($(target).attr("cy")) + offsety) / viewbox; // y-coordinates of target
          // calculating absolute offset
          var attach_absoffset = [];
          attach_absoffset[0] = attach_rel_coords[0] * zoomsize + corrx;
          attach_absoffset[1] = attach_rel_coords[1] * zoomsize + corry;
          // applying attachment
          $(element).css( "left", attach_absoffset[0]);
          $(element).css( "top", attach_absoffset[1]); 
        }
        // attaching labels
        map_attach('#label1','#waypoint1',16,0,0,0);
        map_attach('#label2','#waypoint2',16,0,0,0);
        map_attach('#label3','#waypoint3',16,0,0,0);
        map_attach('#label4','#waypoint4',16,0,0,0);
        map_attach('#label5','#waypoint5',16,0,0,0);
        map_attach('#label6','#waypoint6',16,-10,0,0);
        map_attach('#label7','#waypoint7',-16,0,-90,0);
        map_attach('#label8','#waypoint8',16,0,0,0);
      }

      // setting starting waypoint
      var current_waypoint = '#waypoint1';
      var current_zoom = 1;
      var numberOfWaypoints = 8; // total number of waypoints to move through
      // waypoint function
      var map_waypoint = function(action) {
        var current_number = parseInt(current_waypoint.charAt(current_waypoint.length - 1));
        // calculating new waypoint
        var new_number = 0;
        if (action == "next") {
          if (current_number + 1 > numberOfWaypoints) {
            current_waypoint = '#waypoint1';
            new_number = 1;
          } else {
            new_number = current_number + 1;
            current_waypoint = '#waypoint'+new_number;
          }
        } else if (action == "previous") {
          if (current_number - 1 < 1) {
            current_waypoint = '#waypoint' + numberOfWaypoints;
            new_number = numberOfWaypoints;
          } else {
            new_number = current_number - 1;
            current_waypoint = '#waypoint'+new_number;
          }
        } else {
          current_waypoint = action;
          new_number = parseInt(current_waypoint.charAt(current_waypoint.length - 1));
        }
        // waypoint parameters
        if (current_waypoint == '#waypoint1') {
          current_zoom = 1.7;
        } else if (current_waypoint == '#waypoint2') {
          current_zoom = 1.5;
        } else if (current_waypoint == '#waypoint3') {
          current_zoom = 1.5;
        } else if (current_waypoint == '#waypoint4') {
          current_zoom = 2.8;
        } else if (current_waypoint == '#waypoint5') {
          current_zoom = 1.8;
        } else if (current_waypoint == '#waypoint6') {
          current_zoom = 2.5;
        } else if (current_waypoint == '#waypoint7') {
          current_zoom = 2.8;
        } else if (current_waypoint == '#waypoint8') {
          current_zoom = 1.5;
        }
        // executing movement
        map_zoom(current_waypoint,current_zoom);
        // bullet color function
        var waypoint_bullet = function(wpnumber) {
          $("circle").removeClass("active-waypoint");
          $('#waypoint'+ wpnumber).addClass("active-waypoint");
          $(".label").removeClass("animated fadeInLeft");
          $('#label'+ wpnumber).addClass("animated fadeInLeft");
          $(".infopanel").removeClass("animated fadeInLeft");
          $(".infopanel").css( "z-index", 1);
          $(".infopanel").css( "display", "block");
          $('#info'+ wpnumber).addClass("animated fadeInLeft");
          $('#info'+ wpnumber).css( "z-index", 8);
          // actually hiding other panels to stop them from interfering with swiping
          setTimeout(function() {
            $( ".infopanel" ).each(function() {
              if ($(this).css("z-index") === 1) {
                $(".infopanel").css( "display", "none");
              }
            });
          }, 1000);
        }
        waypoint_bullet(new_number);
      }

      // RESIZING
      map_resize();

      // defining mapsize
      var mapsize = $('#map').width(); // native map size

      // INITIAL MAP MOVEMENT
      map_waypoint('#waypoint1');

      // Infopanel resize
      var info_resize = function() {
        var windowheight = $(window).height();
        $('.infopanel').css( "max-height", windowheight);
      }
      info_resize();

      // Infopanel toggle
      $(".infopanel h2").click(function() {
          $(this).siblings("div").slideToggle(400);
          $(this).parent().toggleClass('expand');
      });

      // youtube window
      var yt_player = function(info,action) {
        // fadein
        if (action == "display") {
          // video links for each waypoint
          var yt_string = "error"; // fallback

          if (info == '#info1') {
            yt_string = '<iframe width="420" height="315" src="https://www.youtube.com/embed/CjmgxLldexg" frameborder="0" allowfullscreen></iframe>';
          } if (info == '#info2') {
            yt_string = '<iframe width="420" height="315" src="https://www.youtube.com/embed/fBVM4I3N9SU" frameborder="0" allowfullscreen></iframe>';
          } if (info == '#info3') {
            yt_string = '<iframe width="560" height="315" src="https://www.youtube.com/embed/-cI85ZVltxE" frameborder="0" allowfullscreen></iframe>';
          } if (info == '#info4') {
            yt_string = '<iframe width="560" height="315" src="https://www.youtube.com/embed/q0cmxAYVxqI" frameborder="0" allowfullscreen></iframe>';
          } if (info == '#info5') {
            yt_string = '<iframe width="560" height="315" src="https://www.youtube.com/embed/lJWrjMvmD60" frameborder="0" allowfullscreen></iframe>';
          }

          yt_string = yt_string + '<span class="exitbtn">&#215;</span>'; // adding exit button
          $("#yt-player").html(yt_string);
          // fading in
          $('#yt-player').css( "z-index", "10");
          $('#yt-player').css("opacity", '1');
        } else if (action == "hide") {
          $('#yt-player').css("opacity", '0');
          setTimeout(function() {
            $('#yt-player').css( "z-index", "1");
            $("#yt-player").html("no episode specified");
          }, 1000);
        }        
      }

      $(".vidbanner").click(function() {
        var info_id = '#' + $(this).closest('.infopanel').attr('id');
        yt_player(info_id,'display');
      });

      $("#yt-player, #yt-player .exitbtn").click(function() {
        yt_player('hide','hide');
      });

      // =====================================================================================
      // LOAD COMPLETE (MAP READY)
      // =====================================================================================

      // fading out loading screen
      $('#pulldown').css("opacity",0);
      setTimeout(function() {
          $('#pulldown').hide();
          storyp1('start');
      }, 2000);

      // WINDOW RESIZE
      $(window).on('resize', function(){
        map_resize();
        map_waypoint(current_waypoint);
      });

      // CONTROLS

      // scrollwheel
      // from: https://github.com/jquery/jquery-mousewheel
      var mw_enabled = true;
      $(window).mousewheel(function(event) {
        if (map_activate) {
          if (mw_enabled) {
            mw_enabled = false;
            if (event.deltaY > 0) { // up
              map_waypoint('previous');
            } else if (event.deltaY < 0) { // down
              map_waypoint('next');
            }
            setTimeout(function(){ mw_enabled = true; }, 700); // adding delay before waypoint can be changed again
          }
        }
      });

      // swipe
      // from: https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
      $("#map").swipe( {
        //Generic swipe handler for all directions
        swipe:function(event, direction, distance, duration, fingerCount, fingerData) {
          if (direction == "down") {
            if (map_activate) { map_waypoint('previous'); }
          } else if (direction == "up") {
            if (map_activate) { map_waypoint('next'); }
          }
        },
        threshold:75
      });

      // arrow keys
      $(document).keydown(function(e) {
        if (map_activate) {
          switch(e.which) {

            case 37: // left
            map_waypoint('previous');
            break;

            case 38: // up
            map_waypoint('previous');
            break;

            case 39: // right
            map_waypoint('next');
            break;

            case 40: // down
            map_waypoint('next');
            break;

            default: return; // exit this handler for other keys
          }
          e.preventDefault(); // prevent default action
        }
      });
      
  }); // window.load()

  }); // document.ready()

  </script>

</body>
</html>